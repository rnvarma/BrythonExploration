<!DOCTYPE html>
<html>
<head>
    <meta charset="iso-8859-1">
    <meta name="apple-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css" type="text/css">
    <script src="../src/brython.js"></script>
    <video autoplay id="video"></video>
    <script>
    navigator.getUserMedia  = navigator.getUserMedia ||
                              navigator.webkitGetUserMedia ||
                              navigator.mozGetUserMedia ||
                              navigator.msGetUserMedia;
    
    function onResize() {
        var canvas = document.getElementById("brythonCanvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }

    function init() {
        onResize();
        brython();
    }

    var video = document.querySelector('video');

    function success(stream) {
        video.src = window.URL.createObjectURL(stream);
    }
 
    function fallback(e) {
        alert("damn...");
    }

    function success(stream) {
        video.src = window.URL.createObjectURL(stream);
    }

    if (!navigator.getUserMedia) {
        fallback();
    } else {
        navigator.getUserMedia({video: true}, success, fallback);
    }
    </script>
</head>
<body onLoad="init()">
    <script type="text/python" src="/mobile.py"></script>
    <canvas id="brythonCanvas"></canvas>
</body>
</html>
